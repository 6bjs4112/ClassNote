<!DOCTYPE html>
<html lang="kr">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>스크롤</title>
</head>
<body>
    
    <article>
        <h2>콘텐츠 위치 확인 후 활성화</h2>
        <figure>
            <p><img src="./img/01.jpg"></p>
            <p><img src="./img/02.jpg"></p>
            <p><img src="./img/03.jpg"></p>
            <p><img src="./img/04.jpg"></p>
            <p><img src="./img/05.jpg" class="s"></p>
            <p><img src="./img/06.jpg"></p>
            <p><img src="./img/07.jpg" class="s"></p>
        </figure>
        <style>
            img.s{width: 60%;}
            img{opacity: 0; transform: translateX(-100%); transition: 1s;}
            img.active{opacity: 1; transform: translateX(0%);}
        </style>
        <script>
                
            const elImg = document.querySelectorAll('img');
            // console.log(document.documentElement.scrollHeight);
            let imgArr=[];
            
            function init(){
                console.log( imgArr )
                contentScroll();
            }//end init
            
            function contentScroll(){

                elImg.forEach(function(ele){
                    imgArr.push( ele.getBoundingClientRect() );
                })

                let winH = window.innerHeight;

                function scrollFunBorder(){
                    imgArr.forEach(function(offset,key){
                        if( window.pageYOffset > (offset.y - winH) ){
                        // elImg[key].style.border = "5px solid red";
                            elImg[key].classList.add('active');
                        }
                    })
                }
                window.onscroll = scrollFunBorder;
                scrollFunBorder(); //스크롤 이벤트와 상관없이 한번 실행
            }//end contentScroll

            window.onload= init;  
            //이벤트, onclick과 비슷

        </script>
    
        <!-- <script>//위 함수들 대신에 이렇게도 쓸수있음
            const io = new IntersectionObserver(entries =>{
                entries.forEach(entry=>{
                    if(entry.intersectionRatio > 0){
                        entry.target.classList.add('active');
                    }
                })
            })
            io.observe(elImg[0]);
            io.observe(elImg[1]);
            io.observe(elImg[2]);
            io.observe(elImg[3]);
            io.observe(elImg[4]);
            io.observe(elImg[5]);
            io.observe(elImg[6]);
        </script> -->
    
    
    
    
    </article>

    

</body>
</html>